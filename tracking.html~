<html>
<head>
	<title>Diwata-1 Tracking</title>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
	<script src="http://maps.google.com/maps/api/js?v=3"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-plugins/1.6.0/layer/tile/Google.min.js"></script>
	<script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
</head>
<body>
	<!-- define a DIV into which the map will appear. Make it take up the whole window -->
	<div style="width:100%; height:100%" id="map"></div>
	
<script type='text/javascript'>

var diwataIcon = new L.Icon({
     iconSize: [36, 32],
     iconAnchor: [18, 16],
     popupAnchor:  [18, 16],
     iconUrl: 'diwata.png'
 });

var dLoc, geojson;

function loadDiwata() {
$.getJSON("http://api.orbit.phl-microsat.xyz/diwata1", function(geojson){
    if (dLoc){
    map.removeLayer(dLoc);
    
    }
    dLoc = L.geoJson(geojson, {
        pointToLayer: function (feature, latlng) {
            return L.marker(latlng, {icon: diwataIcon});
        }
    });
    
    map.addLayer(dLoc);
    setTimeout(loadDiwata, 1000); 
});
}

var map = new L.Map('map', {center: new L.LatLng(14, 121), zoom: 1});
var ggl = new L.Google();
map.addLayer(ggl);

loadDiwata();


</script>
 
</body>
</html>
